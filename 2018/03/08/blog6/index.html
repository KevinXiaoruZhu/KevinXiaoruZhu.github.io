<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="=_=">
  <meta name="keywords" content="">
  
    <link rel="icon" href="/images/favicon.ico">
  
    
  <title>ACM思考题-2 | Xiaoru&#39;s Website</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css" />
</head>

<body>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>Xiaoru's Website</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/movies" class="item-link">Movies</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">Archives</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">Tags</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">About</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
        <section class="content markdown-body">
          <h1>ACM思考题-2</h1>
          <div class='post-meta'>
            <i class="fa fa-calendar" aria-hidden="true"></i> <time>2018年03月08日</time>
            
              | <i class="fa fa-folder-open-o" aria-hidden="true"></i> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Computer-Science/">Computer Science</a>
  </div>



            
            
              | 
                  <i class="fa fa-tags" aria-hidden="true"></i>
                
               
  <a href="/tags/#Algorithm" class='tag'>Algorithm</a>

  <a href="/tags/#Data Structure" class='tag'>Data Structure</a>


            
          </div>
          <script src="/assets/js/APlayer.min.js"> </script><h3 id="思考题-石子合并问题"><a href="#思考题-石子合并问题" class="headerlink" title="思考题-石子合并问题"></a><strong><em>思考题-石子合并问题</em></strong></h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><img src="/2018/03/08/blog6/blog6-1.png" title="[blog6-img1]">
<h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><blockquote><p>这道题目是没有思考出来的。我首先想到的思路是使用动态规划，令dp[i][j]表示第i堆石子到第j堆石子合并的最小代价得分，很容易得出其状态转移方程：<br><strong>dp[i][j] = min( dp(i, k) + dp(k+1, j) + sum(i, j))  {i &lt;= k &lt; j}</strong> , sum[i]表示第1到第i堆石子总和；<br>但是，dp的存储需要一个50000x50000的int型二维数组，显然题目要求的内存满足不了<br>这么大的开销，通过网上查阅相关资料和与同学讨论，得出了解决办法。使用GarsiaWachs算法解决上述问题:<br>1) 假设仅对3堆石子x, y, z进行比较, 先合并哪两堆, 使得得分最小：<br>pen1 = (x+y) + ((x+y)+z),  pen2 = (y+z) + ((y+z)+x)。若pen1 &lt; pen2, 则只需满足x &lt; z, 即可以得出先合并哪两堆.<br>2) GarsiaWachs算法, 就是基于(1)的结论实现.找出序列中满足pile[i-1]&lt;=pile[i+1]最小i, 合并pile[i]+pile[i-1], 接着往前面找是否有满足pile[j] &gt; temp, 把中间值md值插入pile[j]的右边。以此类推直至剩下最后一堆石子。</p>
</blockquote>
<h4 id="时间复杂度分析"><a href="#时间复杂度分析" class="headerlink" title="时间复杂度分析"></a>时间复杂度分析</h4><blockquote><p>分析程序，每一个案例的时间复杂度为O(n^2)。</p>
</blockquote>
<h4 id="源代码-CPP"><a href="#源代码-CPP" class="headerlink" title="源代码(CPP)"></a>源代码(CPP)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> pile[<span class="number">50005</span>], n, num, asr, i, j, md;</span><br><span class="line"><span class="keyword">bool</span> judg;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> k)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        num = <span class="number">1</span>; asr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">cin</span> &gt;&gt; pile[i];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            pile[num] = pile[i]; ++num;</span><br><span class="line">            <span class="keyword">for</span>(;;)</span><br><span class="line">            &#123;</span><br><span class="line">                judg = num &gt; <span class="number">2</span> &amp;&amp; pile[num - <span class="number">3</span>] &lt;= pile[num - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span>(!judg) <span class="keyword">break</span>;</span><br><span class="line">                merge(num - <span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(num &gt; <span class="number">1</span>) merge(num<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; asr &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> idx)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    md = pile[idx] + pile[idx<span class="number">-1</span>]; asr += md;</span><br><span class="line">    <span class="keyword">for</span>(i = idx; i &lt; num - <span class="number">1</span>; ++i) pile[i] = pile[i+<span class="number">1</span>];</span><br><span class="line">    --num;</span><br><span class="line">    <span class="keyword">for</span>(j = idx<span class="number">-1</span>; j &gt; <span class="number">0</span> &amp;&amp; pile[j<span class="number">-1</span>] &lt; md; --j) pile[j] = pile[j<span class="number">-1</span>];</span><br><span class="line">    pile[j] = md;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        judg = j &gt;= <span class="number">2</span> &amp;&amp; pile[j] &gt;= pile[j<span class="number">-2</span>];</span><br><span class="line">        <span class="keyword">if</span>(!judg) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">int</span> d = num - j;</span><br><span class="line">        merge(j<span class="number">-1</span>);</span><br><span class="line">        j = num - d;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="思考题-Bridging-signals"><a href="#思考题-Bridging-signals" class="headerlink" title="思考题-Bridging signals"></a><strong><em>思考题-Bridging signals</em></strong></h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h4><img src="/2018/03/08/blog6/blog6-2.png" title="[blog6-img2]">
<h4 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h4><blockquote><p>本题使用了动态规划中的最长上升子序列算法，状态定义为：dp[i]代表子序列i项最小值, len代表dp数组当前大小; 状态转移表示为：扫描map数组元素 map[i], 先找到dp数组中第一项大于等于map[i]的元素, 记为dp[pos]; 将dp[pos]更新成a[i]即可; 如果dp数组中没有元素比a[i]大的话, 那么直接将map[i] append到dp数组的尾部,再更新dp数组长度。函数lower_bound()在数组的首项末项区间进行二分查找, 返回大于或等于map[i]的第一个元素位置。</p>
</blockquote>
<h4 id="时间复杂度分析-1"><a href="#时间复杂度分析-1" class="headerlink" title="时间复杂度分析"></a>时间复杂度分析</h4><blockquote><p>由于函数lower_bound()采用的是二分查找，其时间复杂度为O(logn)，而对于每一个case，遍历数组的复杂度是线性O(n),所以该算法的时间复杂度为O(n*logn)。</p>
</blockquote>
<h4 id="源代码-CPP-1"><a href="#源代码-CPP-1" class="headerlink" title="源代码(CPP)"></a>源代码(CPP)</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, p, i, j, pos, len, <span class="built_in">map</span>[<span class="number">40010</span>], dp[<span class="number">40010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(<span class="built_in">map</span>, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p);</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; p; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;<span class="built_in">map</span>[i]);</span><br><span class="line">        <span class="comment">//fill(dp, dp + n, 1);</span></span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//dp[1] = map[1];</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; p; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            pos = (<span class="keyword">int</span>)(lower_bound(dp, dp + len, <span class="built_in">map</span>[i]) - dp);</span><br><span class="line">            dp[pos] = <span class="built_in">map</span>[i];</span><br><span class="line">            <span class="keyword">if</span> (pos + <span class="number">1</span> &gt; len) len = pos + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//int ans = * max_element(dp, dp + p + 1) + 1;</span></span><br><span class="line">        <span class="comment">//printf("%d\n", ans);</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>正文结束，如需转载，请标明出处！</em></strong></p>
<hr>

        </section>
    </article>
    
    
        <!-- livere 评论框 start -->
        <div class="comment">
            <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzgyNi8xMDM3OQ=="></div>
        </div>
        <!-- livere 评论框 end -->
    
  </div>
  <aside>
    
    <div class="toc-container">
        <h1>目录</h1>
        <div class="content">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#思考题-石子合并问题"><span class="toc-number">1.</span> <span class="toc-text">思考题-石子合并问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#题目"><span class="toc-number">1.1.</span> <span class="toc-text">题目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解题思路"><span class="toc-number">1.2.</span> <span class="toc-text">解题思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间复杂度分析"><span class="toc-number">1.3.</span> <span class="toc-text">时间复杂度分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#源代码-CPP"><span class="toc-number">1.4.</span> <span class="toc-text">源代码(CPP)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#思考题-Bridging-signals"><span class="toc-number">2.</span> <span class="toc-text">思考题-Bridging signals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#题目-1"><span class="toc-number">2.1.</span> <span class="toc-text">题目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解题思路-1"><span class="toc-number">2.2.</span> <span class="toc-text">解题思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间复杂度分析-1"><span class="toc-number">2.3.</span> <span class="toc-text">时间复杂度分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#源代码-CPP-1"><span class="toc-number">2.4.</span> <span class="toc-text">源代码(CPP)</span></a></li></ol></li></ol>
        </div>
    </div>
    
  </aside>
</main>


<script type="text/javascript">
  (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>


  <footer>
  <div class="copyright">
    <div>
      &copy; 2018 | Xiaoru Zhu<!--Powered by <a href="https://hexo.io" target="_blank">Hexo</a>-->&nbsp
    </div>
    <!--
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath" target="_blank">Aath</a>
    </div>
    -->
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="/lib/in-view.min.js"></script>
<script src="/lib/lodash.min.js"></script>
<script>
  var isDown = true
  var oldY = 0
  inView.offset(50)

  document.body.addEventListener('touchstart', function(){});

  window.addEventListener('scroll', _.throttle(e => {
    var currentY = window.scrollY
    if((oldY - currentY) < 0) {
      isDown = true
    } else {
      isDown = false
    }
    oldY = currentY
  }, 250))

  $("article img").each(function() {
      var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
      $(this).wrapAll(strA);
  });

  $('.toc-link').each(function() {
      var href = $(this).attr("href");

      inView(href).on('exit', () => {
        if (isDown) {
          handleActive(href)
        }
      })

      inView(href).on('enter', () => {
        if (!isDown) {
          handleActive(href)
        }
      })

      this.onclick = function(e) {
        var pos = $(href).offset().top - 10;
        $("html,body").animate({scrollTop: pos}, 300);
        setTimeout(() => {
          handleActive(href)
        }, 350)
        return false
      }
  })

  function handleActive(href) {
    document.querySelectorAll('.toc-link').forEach(elm => {
      elm.classList.remove('active')
    })
    document.querySelector(".toc [href='"+ href +"']").classList.add('active')
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>


</body>
</html>
